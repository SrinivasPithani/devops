<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>ftp_upload.py - RDoc Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body class="file">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../README_md.html">README</a>
  
    <li class="file"><a href="../ansible/README.html">README</a>
  
    <li class="file"><a href="../bash/README.html">README</a>
  
    <li class="file"><a href="../bash/find_files_sh.html">find_files.sh</a>
  
    <li class="file"><a href="../bash/test_sh.html">test.sh</a>
  
    <li class="file"><a href="../doc/created_rid.html">created.rid</a>
  
    <li class="file"><a href="../perl/README.html">README</a>
  
    <li class="file"><a href="../perl/array_example_pl.html">array_example.pl</a>
  
    <li class="file"><a href="../perl/chomp_pl.html">chomp.pl</a>
  
    <li class="file"><a href="../perl/circumference_of_circle_pl.html">circumference_of_circle.pl</a>
  
    <li class="file"><a href="../perl/conf_env.html">conf.env</a>
  
    <li class="file"><a href="../perl/create_perl_file_sh.html">create_perl_file.sh</a>
  
    <li class="file"><a href="../perl/default_variabe_pl.html">default_variabe.pl</a>
  
    <li class="file"><a href="../perl/file_copy_pl.html">file_copy.pl</a>
  
    <li class="file"><a href="../perl/foreach_ex_pl.html">foreach_ex.pl</a>
  
    <li class="file"><a href="../perl/hash_each_ex_forloop_pl.html">hash_each_ex_forloop.pl</a>
  
    <li class="file"><a href="../perl/hash_each_ex_whileloop_pl.html">hash_each_ex_whileloop.pl</a>
  
    <li class="file"><a href="../perl/ip_extract_pl.html">ip_extract.pl</a>
  
    <li class="file"><a href="../perl/ip_info.html">ip_info</a>
  
    <li class="file"><a href="../perl/list_of_num_strings_pl.html">list_of_num_strings.pl</a>
  
    <li class="file"><a href="../perl/list_of_strings_pl.html">list_of_strings.pl</a>
  
    <li class="file"><a href="../perl/perl_hash_example_pl.html">perl_hash_example.pl</a>
  
    <li class="file"><a href="../perl/perl_notes.html">perl_notes</a>
  
    <li class="file"><a href="../perl/print_string_number_pl.html">print_string_number.pl</a>
  
    <li class="file"><a href="../perl/product_of_two_pl.html">product_of_two.pl</a>
  
    <li class="file"><a href="../perl/regex00_pl.html">regex00.pl</a>
  
    <li class="file"><a href="../perl/say_hello_pl.html">say_hello.pl</a>
  
    <li class="file"><a href="../perl/sftp_check_1_pl.html">sftp_check.1.pl</a>
  
    <li class="file"><a href="../perl/sftp_check_pl.html">sftp_check.pl</a>
  
    <li class="file"><a href="../perl/sort_asciibetical_pl.html">sort_asciibetical.pl</a>
  
    <li class="file"><a href="../perl/source_dest_copy_pl.html">source_dest_copy.pl</a>
  
    <li class="file"><a href="../perl/stdin_pl.html">stdin.pl</a>
  
    <li class="file"><a href="../perl/strings_pl.html">strings.pl</a>
  
    <li class="file"><a href="../perl/sub1_pl.html">sub1.pl</a>
  
    <li class="file"><a href="../perl/sum_of_numbers_pl.html">sum_of_numbers.pl</a>
  
    <li class="file"><a href="../perl/test_pl.html">test.pl</a>
  
    <li class="file"><a href="../perl/test_if_pl.html">test_if.pl</a>
  
    <li class="file"><a href="../perl/while_loop_pl.html">while_loop.pl</a>
  
    <li class="file"><a href="../python/README.html">README</a>
  
    <li class="file"><a href="../python/class_1_py.html">class_1.py</a>
  
    <li class="file"><a href="../python/class_ex01_py.html">class_ex01.py</a>
  
    <li class="file"><a href="../python/class_ex02_py.html">class_ex02.py</a>
  
    <li class="file"><a href="../python/class_ex03_py.html">class_ex03.py</a>
  
    <li class="file"><a href="../python/count_strings_py.html">count_strings.py</a>
  
    <li class="file"><a href="../python/d1_py.html">d1.py</a>
  
    <li class="file"><a href="../python/dict01_py.html">dict01.py</a>
  
    <li class="file"><a href="../python/dict_forloop_py.html">dict_forloop.py</a>
  
    <li class="file"><a href="../python/dict_square_py.html">dict_square.py</a>
  
    <li class="file"><a href="../python/divby7_py.html">divby7.py</a>
  
    <li class="file"><a href="../python/divby7_not5_py.html">divby7_not5.py</a>
  
    <li class="file"><a href="../python/dump/postclose/aa_ftp.html">aa.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ac_ftp.html">ac.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/adc_ftp.html">adc.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/adh_ftp.html">adh.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ae_ftp.html">ae.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/af_ftp.html">af.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ag_ftp.html">ag.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ah_ftp.html">ah.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ahd_ftp.html">ahd.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ahe_ftp.html">ahe.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ahf_ftp.html">ahf.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ahl_ftp.html">ahl.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/ahm_ftp.html">ahm.ftp</a>
  
    <li class="file"><a href="../python/dump/postclose/aho_ftp.html">aho.ftp</a>
  
    <li class="file"><a href="../python/echo_client_py.html">echo_client.py</a>
  
    <li class="file"><a href="../python/echo_server_py.html">echo_server.py</a>
  
    <li class="file"><a href="../python/email_header_py.html">email_header.py</a>
  
    <li class="file"><a href="../python/email_header_1_py.html">email_header_1.py</a>
  
    <li class="file"><a href="../python/factorial_py.html">factorial.py</a>
  
    <li class="file"><a href="../python/file1.html">file1</a>
  
    <li class="file"><a href="../python/file2.html">file2</a>
  
    <li class="file"><a href="../python/for_loop_py.html">for_loop.py</a>
  
    <li class="file"><a href="../python/ftp_upload_py.html">ftp_upload.py</a>
  
    <li class="file"><a href="../python/function_print_py.html">function_print.py</a>
  
    <li class="file"><a href="../python/greater_than_54_py.html">greater_than_54.py</a>
  
    <li class="file"><a href="../python/guess_number_py.html">guess_number.py</a>
  
    <li class="file"><a href="../python/guess_number_u1_py.html">guess_number_u1.py</a>
  
    <li class="file"><a href="../python/gzip_logs_sh.html">gzip_logs.sh</a>
  
    <li class="file"><a href="../python/hobbies_lists_for_loop_py.html">hobbies_lists_for_loop.py</a>
  
    <li class="file"><a href="../python/hobbies_lists_while_loop_py.html">hobbies_lists_while_loop.py</a>
  
    <li class="file"><a href="../python/http/url_check_py.html">url_check.py</a>
  
    <li class="file"><a href="../python/if_while_py.html">if_while.py</a>
  
    <li class="file"><a href="../python/is_phonenumber_py.html">is_phonenumber.py</a>
  
    <li class="file"><a href="../python/key_info_txt.html">key_info</a>
  
    <li class="file"><a href="../python/list_of_dict_py.html">list_of_dict.py</a>
  
    <li class="file"><a href="../python/list_of_dict02_py.html">list_of_dict02.py</a>
  
    <li class="file"><a href="../python/lists1_py.html">lists1.py</a>
  
    <li class="file"><a href="../python/my_file.html">my_file</a>
  
    <li class="file"><a href="../python/pipe_01_py.html">pipe_01.py</a>
  
    <li class="file"><a href="../python/print_name_py.html">print_name.py</a>
  
    <li class="file"><a href="../python/print_triangle_py.html">print_triangle.py</a>
  
    <li class="file"><a href="../python/print_triangle_middle_py.html">print_triangle_middle.py</a>
  
    <li class="file"><a href="../python/print_triangle_reverse_py.html">print_triangle_reverse.py</a>
  
    <li class="file"><a href="../python/python_test_py.html">python_test.py</a>
  
    <li class="file"><a href="../python/re_wordmatch_py.html">re_wordmatch.py</a>
  
    <li class="file"><a href="../python/regex_ex01_py.html">regex_ex01.py</a>
  
    <li class="file"><a href="../python/regex_is_digit_py.html">regex_is_digit.py</a>
  
    <li class="file"><a href="../python/sets_py.html">sets.py</a>
  
    <li class="file"><a href="../python/sftp_check_1_py.html">sftp_check.1.py</a>
  
    <li class="file"><a href="../python/sftp_check_2_py.html">sftp_check.2.py</a>
  
    <li class="file"><a href="../python/sftp_check_3_py.html">sftp_check.3.py</a>
  
    <li class="file"><a href="../python/sftp_check_py.html">sftp_check.py</a>
  
    <li class="file"><a href="../python/snmp/getsnmp_py.html">getsnmp.py</a>
  
    <li class="file"><a href="../python/square_of_numbers_py.html">square_of_numbers.py</a>
  
    <li class="file"><a href="../python/ssh_example_py.html">ssh_example.py</a>
  
    <li class="file"><a href="../python/student_registration_py.html">student_registration.py</a>
  
    <li class="file"><a href="../python/subprocess_popen1_py.html">subprocess_popen1.py</a>
  
    <li class="file"><a href="../python/sum_of_odd_py.html">sum_of_odd.py</a>
  
    <li class="file"><a href="../python/sys_argv_py.html">sys_argv.py</a>
  
    <li class="file"><a href="../python/sys_argv_ex01_py.html">sys_argv_ex01.py</a>
  
    <li class="file"><a href="../python/test_1_py.html">test_1.py</a>
  
    <li class="file"><a href="../python/test_def_py.html">test_def.py</a>
  
    <li class="file"><a href="../python/testread_txt.html">testread</a>
  
    <li class="file"><a href="../python/tuples_lists_py.html">tuples_lists.py</a>
  
    <li class="file"><a href="../python/urlcheck_py.html">urlcheck.py</a>
  
    <li class="file"><a href="../python/while_loop_py.html">while_loop.py</a>
  
    <li class="file"><a href="../python/words_to_strings_py.html">words_to_strings.py</a>
  
    <li class="file"><a href="../python/ws/static/css/main_css.html">main.css</a>
  
    <li class="file"><a href="../python/ws/templates/about_html.html">about.html</a>
  
    <li class="file"><a href="../python/ws/templates/index_html.html">index.html</a>
  
    <li class="file"><a href="../python/ws/templates/layout_html.html">layout.html</a>
  
    <li class="file"><a href="../python/ws/templates/server_html.html">server.html</a>
  
    <li class="file"><a href="../python/ws/ws_ping_py.html">ws_ping.py</a>
  
    <li class="file"><a href="../python/xsftp_conf_ini.html">xsftp_conf.ini</a>
  
    <li class="file"><a href="../ruby/data/bnb_csv.html">bnb.csv</a>
  
    <li class="file"><a href="../ruby/data/book_txt.html">book</a>
  
    <li class="file"><a href="../ruby/data/houseprices_csv.html">houseprices.csv</a>
  
    <li class="file"><a href="../ruby/data/mdata_csv.html">mdata.csv</a>
  
    <li class="file"><a href="../ruby/data/olivier_txt.html">olivier</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation" class="description">
  
<p>import subprocess, os from ftplib import FTP import logging import smtplib</p>

<p>path = “/tmp/aspect_test.log”
logging.basicConfig(filename=“/tmp/ftp_upload.log”, level=logging.INFO,
format=“%(asctime)s:%(levelname)s:%(message)s”)</p>

<p>fp = { “site”: “ftp01.aotenergy.com”,</p>

<pre> &quot;login&quot;: &quot;aspect_log_files&quot;,
 &quot;password&quot;: &quot;Asp3ct+P4$$&quot;,
 &quot;des_folder&quot;: &quot;aspect_log_files&quot;,
 &quot;port&quot;: &quot;21&quot;,
}</pre>

<p>def ftp_upload(f2up):</p>

<pre>try:
      ftp = FTP(host=fp[&quot;site&quot;], user=fp[&quot;login&quot;], passwd=fp[&quot;password&quot;])
      print(&quot;AOT FTP connected &quot;)  
      logging.info(&quot;AOT FTP Connected&quot;)
      ftp.cwd(&quot;aspect_log_files&quot;) 
      f = open(f2up, &#39;rb&#39;)          
      ftp.storbinary(&#39;STOR backup.tar.gz&#39;, f)
      ftp.close()
      subprocess.call(&#39;echo &quot;AOT UPLOAD SUCCESSFUL &quot; | mail -s &quot;AOT FTP UPLOAD SUCCESSFUL&quot; spithani@aspectenterprise.com&#39;, shell=True)
except: 
      logging.info(&quot;AOT FTP connection failure&quot;) 
      #Send notification
      subprocess.call(&#39;echo &quot;AOT FAILED UPLOAD&quot; | mail -s &quot;AOT FTP UPLOAD FAILED &quot; spithani@aspectenterprise.com&#39;, shell=True)</pre>

<p>find the files which needs to be uploaded , zip them &amp; name them 
subprocess.call(&#39;rsync -avz
uk1as53:/var/log/aot_ftp_upload/ftp_upload.tar.gz /tmp/aot_uploads/ &#39;,
shell=True) subprocess.call(&#39;mv /tmp/aot_uploads/backup.tar.gz
/tmp/aot_uploads/test_upload_`date +&#39;%d%m%Y&#39;`&#39;) f2up =
“/tmp/aot_uploads/backup.tar.gz” ftp_upload(f2up) update time date =
subprocess.call(“date +&#39;%d%m%Y-%H%M&#39;”, shell=True)</p>

</div>



<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.0.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

